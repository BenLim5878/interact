<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://kit.fontawesome.com/2fbbb4bb77.js" crossorigin="anonymous"></script>
<?php
session_start();
if (!isset($_SESSION['status'])) {
    header("Location: /interact/index.php");
}
if ($_SESSION['role'] == 'admin') {
    header("Location: /interact/adminPage.php");
}
$userID = $_SESSION['userid'];
echo "<script>var sessionUserID = $userID</script>";
?>
<div class="header2">
    <div class="wrapper">
        <div id="logo-header2"></div>
        <!-- Menu icon -->
        <button id="menu-header2">
            <svg xmlns="http://www.w3.org/2000/svg" height="1.354166666666666666666666666667vw" viewBox="0 -53 384 384" width="1.145833333333333333333333333333vw">
                <path d="m368 154.667969h-352c-8.832031 0-16-7.167969-16-16s7.167969-16 16-16h352c8.832031 0 16 7.167969 16 16s-7.167969 16-16 16zm0 0" />
                <path d="m368 32h-352c-8.832031 0-16-7.167969-16-16s7.167969-16 16-16h352c8.832031 0 16 7.167969 16 16s-7.167969 16-16 16zm0 0" />
                <path d="m368 277.332031h-352c-8.832031 0-16-7.167969-16-16s7.167969-16 16-16h352c8.832031 0 16 7.167969 16 16s-7.167969 16-16 16zm0 0" />
            </svg>
        </button>
        <button id="closeMenu-header2">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 329.26933 329">
                <g class="vectorColor">
                    <path d="m194.800781 164.769531 128.210938-128.214843c8.34375-8.339844 8.34375-21.824219 0-30.164063-8.339844-8.339844-21.824219-8.339844-30.164063 0l-128.214844 128.214844-128.210937-128.214844c-8.34375-8.339844-21.824219-8.339844-30.164063 0-8.34375 8.339844-8.34375 21.824219 0 30.164063l128.210938 128.214843-128.210938 128.214844c-8.34375 8.339844-8.34375 21.824219 0 30.164063 4.15625 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921875-2.089844 15.082031-6.25l128.210937-128.214844 128.214844 128.214844c4.160156 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921874-2.089844 15.082031-6.25 8.34375-8.339844 8.34375-21.824219 0-30.164063zm0 0" />
                </g>
            </svg>
        </button>
        <!-- Menu -->
        <div id="homepage-menu">
            <div class="links">
                <!-- Home -->
                <a id="home-btn" href="/interact/userPage.php">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                        <path d="m498.195312 222.695312c-.011718-.011718-.023437-.023437-.035156-.035156l-208.855468-208.847656c-8.902344-8.90625-20.738282-13.8125-33.328126-13.8125-12.589843 0-24.425781 4.902344-33.332031 13.808594l-208.746093 208.742187c-.070313.070313-.140626.144531-.210938.214844-18.28125 18.386719-18.25 48.21875.089844 66.558594 8.378906 8.382812 19.445312 13.238281 31.277344 13.746093.480468.046876.964843.070313 1.453124.070313h8.324219v153.699219c0 30.414062 24.746094 55.160156 55.167969 55.160156h81.710938c8.28125 0 15-6.714844 15-15v-120.5c0-13.878906 11.289062-25.167969 25.167968-25.167969h48.195313c13.878906 0 25.167969 11.289063 25.167969 25.167969v120.5c0 8.285156 6.714843 15 15 15h81.710937c30.421875 0 55.167969-24.746094 55.167969-55.160156v-153.699219h7.71875c12.585937 0 24.421875-4.902344 33.332031-13.808594 18.359375-18.371093 18.367187-48.253906.023437-66.636719zm0 0" />
                    </svg>
                    <h3>Home</h3>
                </a>
                <!-- Category -->
                <a id="category-btn" href="/interact/category-list.php">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 24.334 24.334" style="enable-background:new 0 0 24.334 24.334;" xml:space="preserve">
                        <g>
                            <g>
                                <path style="fill: #ef6c35;" d="M10.295,0H0.936C0.419,0,0,0.419,0,0.936v9.359c0,0.517,0.419,0.936,0.936,0.936h9.359    c0.517,0,0.936-0.419,0.936-0.936V0.936C11.231,0.419,10.812,0,10.295,0z" />
                                <path style="fill: #ef6c35;" d="M23.398,0h-9.359c-0.517,0-0.936,0.419-0.936,0.936v9.359c0,0.517,0.419,0.936,0.936,0.936h9.359    c0.517,0,0.936-0.419,0.936-0.936V0.936C24.334,0.419,23.915,0,23.398,0z M22.462,9.359h-7.487V1.872h7.487V9.359z" />
                                <path style="fill: #ef6c35;" d="M10.295,13.103H0.936C0.419,13.103,0,13.522,0,14.039v9.359c0,0.517,0.419,0.936,0.936,0.936h9.359    c0.517,0,0.936-0.419,0.936-0.936v-9.359C11.231,13.521,10.812,13.103,10.295,13.103z M4.42,22.462    c0.161-0.276,0.26-0.593,0.26-0.936c0-1.034-0.838-1.872-1.872-1.872c-0.343,0-0.66,0.099-0.936,0.26v-2.391    c0.276,0.161,0.593,0.26,0.936,0.26c1.034,0,1.872-0.838,1.872-1.872c0-0.343-0.099-0.66-0.26-0.936h2.391    c-0.161,0.276-0.26,0.593-0.26,0.936c0,1.034,0.838,1.872,1.872,1.872c0.343,0,0.66-0.099,0.936-0.26v2.391    c-0.276-0.161-0.593-0.26-0.936-0.26c-1.034,0-1.872,0.838-1.872,1.872c0,0.343,0.099,0.66,0.26,0.936H4.42z" />
                                <path style="fill: #ef6c35;" d="M23.398,13.103h-9.359c-0.517,0-0.936,0.419-0.936,0.936v4.679v4.679    c0,0.517,0.419,0.936,0.936,0.936h4.679h4.679c0.517,0,0.936-0.419,0.936-0.936v-9.359C24.334,13.521,23.915,13.103,23.398,13.103    z M14.975,19.106l4.131-4.131h2.033l-6.164,6.164C14.975,21.139,14.975,19.106,14.975,19.106z M14.975,14.975h1.484l-1.484,1.484    V14.975z M22.462,16.298v2.032l-4.131,4.132h-2.033L22.462,16.298z M22.462,22.462h-1.485l1.485-1.485V22.462z" />
                                <circle style="fill: #ef6c35;" cx="5.616" cy="18.718" r="1.872" />
                            </g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                    </svg>
                    <h3>Category</h3>
                </a>
                <a id="request-btn" href="/interact/request.php">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                        <path d="m448.800781 0h-192.800781c-34.90625 0-63.199219 28.242188-63.199219 63.199219v289.199219c0 12.269531 14.070313 19.445312 24 12l60.265625-45.199219h171.734375c34.90625 0 63.199219-28.242188 63.199219-63.199219v-192.800781c0-34.90625-28.242188-63.199219-63.199219-63.199219zm-111.402343 238.867188h-65.332032c-8.285156 0-15-6.714844-15-15 0-8.285157 6.714844-15 15-15h65.332032c8.285156 0 15 6.714843 15 15 0 8.285156-6.714844 15-15 15zm95.335937-64.265626h-160.667969c-8.285156 0-15-6.71875-15-15 0-8.285156 6.714844-15 15-15h160.667969c8.28125 0 15 6.714844 15 15 0 8.28125-6.714844 15-15 15zm0-64.269531h-160.667969c-8.285156 0-15-6.714843-15-15 0-8.28125 6.714844-15 15-15h160.667969c8.28125 0 15 6.71875 15 15 0 8.285157-6.714844 15-15 15zm0 0" />
                        <path d="m166.238281 311.898438c0 39.160156-31.746093 70.90625-70.90625 70.90625-39.160156 0-70.90625-31.746094-70.90625-70.90625 0-39.164063 31.746094-70.910157 70.90625-70.910157 39.160157 0 70.90625 31.746094 70.90625 70.910157zm0 0" />
                        <path d="m95.332031 382.804688c-52.648437 0-95.332031 42.683593-95.332031 95.332031v18.863281c0 8.285156 6.714844 15 15 15h160.667969c8.28125 0 15-6.714844 15-15v-18.863281c0-52.648438-42.683594-95.332031-95.335938-95.332031zm0 0" />
                    </svg>
                    <h3>Support</h3>
                </a>
                <a id="helpCenter-btn" href="#">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                        <path d="m256 0c-141.164062 0-256 114.835938-256 256s114.835938 256 256 256 256-114.835938 256-256-114.835938-256-256-256zm0 405.332031c-11.777344 0-21.332031-9.554687-21.332031-21.332031s9.554687-21.332031 21.332031-21.332031 21.332031 9.554687 21.332031 21.332031-9.554687 21.332031-21.332031 21.332031zm33.769531-135.636719c-7.550781 3.476563-12.4375 11.09375-12.4375 19.394532v9.578125c0 11.773437-9.535156 21.332031-21.332031 21.332031s-21.332031-9.558594-21.332031-21.332031v-9.578125c0-24.898438 14.632812-47.722656 37.226562-58.15625 21.738281-10.003906 37.4375-36.566406 37.4375-49.601563 0-29.394531-23.914062-53.332031-53.332031-53.332031s-53.332031 23.9375-53.332031 53.332031c0 11.777344-9.539063 21.335938-21.335938 21.335938s-21.332031-9.558594-21.332031-21.335938c0-52.925781 43.070312-96 96-96s96 43.074219 96 96c0 28.824219-25.003906 71.191407-62.230469 88.363281zm0 0" />
                    </svg>
                    <h3>Help Center</h3>
                    <i class="fas fa-external-link-alt"></i>
                </a>
            </div>
        </div>
        <!-- Search Bar -->
        <div class="searchBar-header2">
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 512.005 512.005" style="enable-background:new 0 0 512.005 512.005;" xml:space="preserve">
                <g>
                    <g>
                        <path d="M505.749,475.587l-145.6-145.6c28.203-34.837,45.184-79.104,45.184-127.317c0-111.744-90.923-202.667-202.667-202.667    S0,90.925,0,202.669s90.923,202.667,202.667,202.667c48.213,0,92.48-16.981,127.317-45.184l145.6,145.6    c4.16,4.16,9.621,6.251,15.083,6.251s10.923-2.091,15.083-6.251C514.091,497.411,514.091,483.928,505.749,475.587z     M202.667,362.669c-88.235,0-160-71.765-160-160s71.765-160,160-160s160,71.765,160,160S290.901,362.669,202.667,362.669z" />
                    </g>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
                </g>
                <g>
                </g>
            </svg>
            <input type="text" id="postTitle" name="postTitle" placeholder="Search Post..." autocomplete="off">
            <div class="postsList-search"></div>
        </div>
        <div class="icons">
            <!-- Bell Icon -->
            <button>
                <div id="bellNotification-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" id="Capa_1" enable-background="new 0 0 511.156 511.156" viewBox="0 0 511.156 511.156">
                        <path d="m184.904 465.044c11.999 27.127 39.154 46.112 70.674 46.112s58.674-18.985 70.674-46.112z" />
                        <path d="m255.573 48.836c20.8 0 40.772 3.67 59.306 10.389v-2.283c0-31.398-25.544-56.942-56.941-56.942h-4.719c-31.398 0-56.942 25.544-56.942 56.942v2.254c18.524-6.699 38.49-10.36 59.296-10.36z" />
                        <path d="m442.747 435.044h-374.338c-7.082 0-13.569-4.776-15.042-11.704-1.458-6.859 1.668-13.629 8.01-16.559 1.505-.976 12.833-8.897 24.174-32.862 20.829-44.01 25.201-106.005 25.201-150.263 0-79.855 64.967-144.82 144.821-144.82 79.665 0 144.512 64.652 144.82 144.245.007.191.011.383.011.575 0 44.258 4.372 106.253 25.201 150.263 11.341 23.965 22.668 31.887 24.174 32.862 6.342 2.93 9.469 9.699 8.01 16.559-1.473 6.927-7.959 11.704-15.042 11.704zm7.2-28.157h.01z" />
                    </svg>
                </div>
            </button>
            <div class="count">
                <h2></h2>
            </div>
            <ul class="dropdown-menu">
            </ul>
            <!-- Setting Icon -->
            <button>
                <div id="setting-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                        <path d="m499.953125 197.703125-39.351563-8.554687c-3.421874-10.476563-7.660156-20.695313-12.664062-30.539063l21.785156-33.886719c3.890625-6.054687 3.035156-14.003906-2.050781-19.089844l-61.304687-61.304687c-5.085938-5.085937-13.035157-5.941406-19.089844-2.050781l-33.886719 21.785156c-9.84375-5.003906-20.0625-9.242188-30.539063-12.664062l-8.554687-39.351563c-1.527344-7.03125-7.753906-12.046875-14.949219-12.046875h-86.695312c-7.195313 0-13.421875 5.015625-14.949219 12.046875l-8.554687 39.351563c-10.476563 3.421874-20.695313 7.660156-30.539063 12.664062l-33.886719-21.785156c-6.054687-3.890625-14.003906-3.035156-19.089844 2.050781l-61.304687 61.304687c-5.085937 5.085938-5.941406 13.035157-2.050781 19.089844l21.785156 33.886719c-5.003906 9.84375-9.242188 20.0625-12.664062 30.539063l-39.351563 8.554687c-7.03125 1.53125-12.046875 7.753906-12.046875 14.949219v86.695312c0 7.195313 5.015625 13.417969 12.046875 14.949219l39.351563 8.554687c3.421874 10.476563 7.660156 20.695313 12.664062 30.539063l-21.785156 33.886719c-3.890625 6.054687-3.035156 14.003906 2.050781 19.089844l61.304687 61.304687c5.085938 5.085937 13.035157 5.941406 19.089844 2.050781l33.886719-21.785156c9.84375 5.003906 20.0625 9.242188 30.539063 12.664062l8.554687 39.351563c1.527344 7.03125 7.753906 12.046875 14.949219 12.046875h86.695312c7.195313 0 13.421875-5.015625 14.949219-12.046875l8.554687-39.351563c10.476563-3.421874 20.695313-7.660156 30.539063-12.664062l33.886719 21.785156c6.054687 3.890625 14.003906 3.039063 19.089844-2.050781l61.304687-61.304687c5.085937-5.085938 5.941406-13.035157 2.050781-19.089844l-21.785156-33.886719c5.003906-9.84375 9.242188-20.0625 12.664062-30.539063l39.351563-8.554687c7.03125-1.53125 12.046875-7.753906 12.046875-14.949219v-86.695312c0-7.195313-5.015625-13.417969-12.046875-14.949219zm-152.160156 58.296875c0 50.613281-41.179688 91.792969-91.792969 91.792969s-91.792969-41.179688-91.792969-91.792969 41.179688-91.792969 91.792969-91.792969 91.792969 41.179688 91.792969 91.792969zm0 0" />
                    </svg>
                </div>
            </button>
            <!-- Setting -->
            <div id="homepage-menu">
                <div class="links">
                    <!-- My Account -->
                    <a id="account-btn" href="/interact/include/user/myAccount.php">
                        <svg xmlns="http://www.w3.org/2000/svg" id="Solid" viewBox="0 0 512 512">
                            <path d="m431.964 435.333c-.921-58.994-19.3-112.636-51.977-151.474-32.487-38.601-76.515-59.859-123.987-59.859s-91.5 21.258-123.987 59.859c-32.646 38.797-51.013 92.364-51.973 151.285 18.46 9.247 94.85 44.856 175.96 44.856 87.708 0 158.845-35.4 175.964-44.667z" />
                            <circle cx="256" cy="120" r="88" />
                        </svg>
                        <h3>My Account</h3>
                    </a>
                    <!-- Logout -->
                    <?php
                    if (isset($_SESSION["userid"])) {
                        echo "<a id='logout-btn' href='/interact/include/logout.inc.php' onclick='deleteCookie()'>
                        <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512.00533 512'>
                            <path d='m320 277.335938c-11.796875 0-21.332031 9.558593-21.332031 21.332031v85.335937c0 11.753906-9.558594 21.332032-21.335938 21.332032h-64v-320c0-18.21875-11.605469-34.496094-29.054687-40.554688l-6.316406-2.113281h99.371093c11.777344 0 21.335938 9.578125 21.335938 21.335937v64c0 11.773438 9.535156 21.332032 21.332031 21.332032s21.332031-9.558594 21.332031-21.332032v-64c0-35.285156-28.714843-63.99999975-64-63.99999975h-229.332031c-.8125 0-1.492188.36328175-2.28125.46874975-1.027344-.085937-2.007812-.46874975-3.050781-.46874975-23.53125 0-42.667969 19.13281275-42.667969 42.66406275v384c0 18.21875 11.605469 34.496093 29.054688 40.554687l128.386718 42.796875c4.351563 1.34375 8.679688 1.984375 13.226563 1.984375 23.53125 0 42.664062-19.136718 42.664062-42.667968v-21.332032h64c35.285157 0 64-28.714844 64-64v-85.335937c0-11.773438-9.535156-21.332031-21.332031-21.332031zm0 0' />
                            <path d='m505.75 198.253906-85.335938-85.332031c-6.097656-6.101563-15.273437-7.9375-23.25-4.632813-7.957031 3.308594-13.164062 11.09375-13.164062 19.714844v64h-85.332031c-11.777344 0-21.335938 9.554688-21.335938 21.332032 0 11.777343 9.558594 21.332031 21.335938 21.332031h85.332031v64c0 8.621093 5.207031 16.40625 13.164062 19.714843 7.976563 3.304688 17.152344 1.46875 23.25-4.628906l85.335938-85.335937c8.339844-8.339844 8.339844-21.824219 0-30.164063zm0 0' />
                        </svg>
                        <h3>Logout</h3>
                    </a>";
                    }
                    ?>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    document.getElementById('menu-header2').addEventListener('click', () => {
        let menu = document.getElementById('homepage-menu');
        menu.style.animation = "reveal 0.2s cubic-bezier(0.6, 0.2, 0.1, 1)";
        menu.style.display = "flex";
        document.getElementById('menu-header2').style.display = "none";
        document.getElementById('closeMenu-header2').style.display = "block";
    });
    document.getElementById('closeMenu-header2').addEventListener('click', () => {
        let menu = document.getElementById('homepage-menu');
        menu.style.display = "none";
        document.getElementById('menu-header2').style.display = "block";
        document.getElementById('closeMenu-header2').style.display = "none";
    });

    var index = 0;

    document.getElementById('setting-icon').addEventListener('click', () => {
        if (index == 0) {
            let menu = document.querySelector('.icons #homepage-menu');
            menu.style.animation = "reveal 0.2s cubic-bezier(0.6, 0.2, 0.1, 1)";
            menu.style.display = "flex";
            index += 1;
            let icon = document.querySelector('#setting-icon svg');
            icon.style.animation = 'settingOpen 0.2s linear';
            icon.style.fill = 'grey';
        } else if (index == 1) {
            let menu = document.querySelector('.icons #homepage-menu');
            menu.style.display = "none";
            index -= 1;
            let icon = document.querySelector('#setting-icon svg');
            icon.style.animation = 'settingClose 0.2s linear';
            icon.style.fill = '#EF6C35';
        }
    });
</script>
<script>
    function deleteCookie() {
        var storageItem = getCookie("newPost")
        delete_cookie("newPost", "/", "localhost");

        function getCookie(cname) {
            var name = cname + "=";
            var decodedCookie = decodeURIComponent(document.cookie);
            var ca = decodedCookie.split(';');
            for (var i = 0; i < ca.length; i++) {
                var c = ca[i];
                while (c.charAt(0) == ' ') {
                    c = c.substring(1);
                }
                if (c.indexOf(name) == 0) {
                    return c.substring(name.length, c.length);
                }
            }
            return "";
        }

        function delete_cookie(name, path, domain) {
            if (getCookie(name)) {
                document.cookie = name + "=" +
                    ((path) ? ";path=" + path : "") +
                    ((domain) ? ";domain=" + domain : "") +
                    ";expires=Thu, 01 Jan 1970 00:00:01 GMT";
            }
        }
    }
</script>
<script>
    $(document).ready(function() {
        $('#postTitle').keyup(function() {
            var query = $(this).val();
            if (query != '') {
                $.ajax({
                    type: "POST",
                    url: "/interact/include/searchPost.php",
                    data: {
                        query: query
                    },
                    success: function(response) {
                        $('.postsList-search').html(response);
                    }
                });
            } else {
                $('.postsList-search').html("");
            }
        })
    });
</script>
<!-- Notification -->
<script>
    $(document).ready(function() {
        load_unseen_notification();
        var timer = setInterval(function() {
            load_unseen_notification();;
        }, 5000);
        $('#bellNotification-icon').click(function(e) {
            if ($('.dropdown-menu').css('display') == 'none') {
                $('.dropdown-menu').css('display', 'block')
                $(this).css('fill', 'grey')
                $(this).css('animation', 'shakeNotifcation 0.4s ease')
                clearInterval(timer);
            } else if ($('.dropdown-menu').css('display') == 'block') {
                $('.dropdown-menu').css('display', 'none')
                $(this).css('fill', '#EF6C35')
                $(this).css('animation', 'none')
                timer = setInterval(function() {
                    load_unseen_notification()
                }, 5000);
            }
        });
        // load new notifications
        function load_unseen_notification() {
            $.ajax({
                url: "/interact/include/fetch.php",
                method: "GET",
                dataType: "json",
                success: function(data) {
                    $('.dropdown-menu').html(data.notification);
                    if (data.unseen_notification > 0) {
                        $('.count').css('display', 'block')
                        $('.count h2').html(data.unseen_notification);
                    }
                }
            });
        }
        // updating the view with notifications using ajax
        $(document).on('click', '#bellNotification-icon', function() {
            $.ajax({
                type: "GET",
                url: "/interact/include/updateNotification.php",
                success: function(response) {
                    $('.count').css('display', 'none');
                }
            });
        });
    });
</script>
<!-- Open new link -->
<script>
    $(document).ready(function() {
        $('#helpCenter-btn').click(function(e) {
            e.preventDefault();
            window.open('/interact/help.php')
        });
    });
</script>